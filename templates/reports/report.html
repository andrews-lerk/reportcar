{% extends 'base.html' %}
{% load static %}

{% block header_style %}
    <header class="header-style">
{% endblock %}
{% block logo %}
    <div class="navbar-header navbar-header-custom">
        <!-- start logo -->
        <a href="{% url 'home' %}" class="navbar-brand-custom"><img id="logo" src="{% static 'img/logos/logo-dark.gif' %}" alt="logo"></a>
        <!-- end logo -->
    </div>
{% endblock logo %}
{% block navigation %}
<div class="attr-nav align-items-lg-center ms-lg-auto">
    {% if request.user.is_authenticated %}
    <ul><li><a href="{% url 'lk' %}" style="text-decoration: underline; color: orange;">{{ request.user }}</a></li></ul>
    {% else %}
    <ul>
        <li><a href="{% url 'login' %}" style="text-decoration: underline; color: orange;">Войти</a></li>
    </ul>
    {% endif %}
</div>
{% endblock navigation %}

{% block banner %}
{% endblock banner %}

{% block body %}
<section>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="p-1-6 p-md-2-2 box-shadows">
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="100ms" style="visibility: visible; animation-delay: 100ms; animation-name: fadeIn;">
                        <h1 class="mb-3 h3">Отчет {{ report.model }}</h1>
                        <h3 class="mb-3 h4">Основная информация об авто</h3>
                        <ul class="list-style1 mb-0">
                            <li style="color: black;">Модель: <mark>{{ report.model }}</mark></li>
                            <li style="color: black;">Цвет: <mark>{{ report.color }}</mark></li>
                            <li style="color: black;">Год выпуска: <mark>{{ report.year }}</mark></li>
                            <li style="color: black;">Объем двигателя: <mark>{% if report.engine_volume == None %}-{% else %}{{ report.engine_volume }}{% endif %}</mark></li>
                            <li style="color: black;">Мощность л.с: <mark>{% if report.power_hp == None %}-{% else %}{{ report.power_hp }}{% endif %}</mark></li>
                            <li style="color: black;">Мощность кВт: <mark>{% if report.power_kwt == None %}-{% else %}{{ report.power_kwt }}{% endif %}</mark></li>
                            <li style="color: black;">Категория ТС: <mark>{% if report.category == None %}-{% else %}{{ report.category }}{% endif %}</mark></li>
                            <li style="color: black;">VIN номер: <mark>{% if report.vin == None %}-{% else %}{{ report.vin }}{% endif %}</mark></li>
                            <li style="color: black;">Регистрационный номер: <mark>{% if report.gos_number == None %}-{% else %}{{ report.gos_number }}{% endif %}</mark></li>
                            <li style="color: black;">Номер кузова: <mark>{% if report.body_number == None %}-{% else %}{{ report.body_number }}{% endif %}</mark></li>
                            <li style="color: black;">Номер двигателя: <mark>{% if report.engine_number == None %}-{% else %}{{ report.engine_number }}{% endif %}</mark></li>
                        </ul>
                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="200ms" style="visibility: visible; animation-delay: 200ms; animation-name: fadeIn;">
                        <h3 class="mb-3 h4">Дополнительная информация</h3>
                        <ul class="list-style1 mb-0">
                            <li style="color: black;">WMI: <mark>{% if decode.wmi == None %}-{% else %}{{ decode.wmi }}{% endif %}</mark></li>
                            <li style="color: black;">VIS идентификатор: <mark>{% if decode.vis == None %}-{% else %}{{ decode.vis }}{% endif %}</mark></li>
                            <li style="color: black;">VDS: <mark>{% if decode.vds == None %}-{% else %}{{ decode.vds }}{% endif %}</mark></li>
                            <li style="color: black;">Идентификатор года: <mark>{% if decode.year_identifier == None %}-{% else %}{{ decode.year_identifier }}{% endif %}</mark></li>
                            <li style="color: black;">Серийный номер: <mark>{% if decode.serial_number == None %}-{% else %}{{ decode.serial_number }}{% endif %}</mark></li>
                            <li style="color: black;">Тип VIN: <mark>{% if decode.vin_type == None %}-{% else %}{{ decode.vin_type }}{% endif %}</mark></li>
                            <li style="color: black;">Тип кузова: <mark>{% if decode.body_type == None %}-{% else %}{{ decode.body_type }}{% endif %}</mark></li>
                            <li style="color: black;">Тип двигателя: <mark>{% if decode.engine_type == None %}-{% else %}{{ decode.engine_type }}{% endif %}</mark></li>
                            <li style="color: black;">Тип топлива: <mark>{% if decode.fuel_type == None %}-{% else %}{{ decode.fuel_type }}{% endif %}</mark></li>
                            <li style="color: black;">Тип трансмиссии: <mark>{% if decode.transmission_type == None %}-{% else %}{{ decode.transmission_type }}{% endif %}</mark></li>
                            <li style="color: black;">Класс авто: <mark>{% if decode.car_class == None %}-{% else %}{{ decode.car_class }}{% endif %}</mark></li>
                            <li style="color: black;">Тип авто: <mark>{% if decode.car_type == None %}-{% else %}{{ decode.car_type }}{% endif %}</mark></li>
                            <li style="color: black;">Отличие кузова: <mark>{% if decode.body_diff == None %}-{% else %}{{ decode.body_diff }}{% endif %}</mark></li>
                            <li style="color: black;">Кол. дверей: <mark>{% if decode.number_doors == None %}-{% else %}{{ decode.number_doors }}{% endif %}</mark></li>
                            <li style="color: black;">Кол. мест: <mark>{% if decode.number_seats == None %}-{% else %}{{ decode.number_seats }}{% endif %}</mark></li>
                            <li style="color: black;">Кол. клапанов двигателя: <mark>{% if decode.engine_valves == None %}-{% else %}{{ decode.engine_valves }}{% endif %}</mark></li>
                            <li style="color: black;">Кол. цилиндров двигателя: <mark>{% if decode.cylinders == None %}-{% else %}{{ decode.cylinders }}{% endif %}</mark></li>
                            <li style="color: black;">Трансмиссия: <mark>{% if decode.transmission == None %}-{% else %}{{ decode.transmission }}{% endif %}</mark></li>
                        </ul>
                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="200ms" style="visibility: visible; animation-delay: 200ms; animation-name: fadeIn;">
                        <h3 class="mb-3 h4">Информация о договоре ОСАГО</h3>
                        <ul class="list-style1 mb-0">
                            <li style="color: black;">Серия ОСАГО: <mark>{{ osago.seria }}</mark></li>
                            <li style="color: black;">Номер ОСАГО: <mark>{{ osago.number }}</mark></li>
                            <li style="color: black;">Наименование страховой организации: <mark>{{ osago.organization }}</mark></li>
                            <li style="color: black;">Статус договора ОСАГО: <mark>{{ osago.status }}</mark></li>
                            <li style="color: black;">Срок действия и период использования транспортного средства договора ОСАГО: <mark>{{ osago.term }}</mark></li>
                            <li style="color: black;">Транспортное средство используется в регионе: <mark>{{ osago.region }}</mark></li>
                            <li style="color: black;">Договор ОСАГО с ограничениями/без ограничений лиц, допущенных к управлению транспортным средством: <mark>{{ osago.restrictions }}</mark></li>
                            <li style="color: black;">Транспортное средство следует к месту регистрации или к месту проведения технического осмотра: <mark>{{ osago.action }}</mark></li>
                            <li style="color: black;">Цель использования транспортного средства: <mark>{{ osago.usage_purposes }}</mark></li>
                            <li style="color: black;">Страхователь: <mark>{{ osago.insured }}</mark></li>
                            <li style="color: black;">Собственник: <mark>{{ osago.owner }}</mark></li>
                            <li style="color: black;">Дата актуальности: <mark>{{ osago.date_actual }}</mark></li>
                        </ul>
                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="300ms" style="visibility: visible; animation-delay: 300ms; animation-name: fadeIn;">
                        <h3 class="mb-3 h4">История владения ТС</h3>
                        {% for period in periods %}
                        <h3 class="mb-3 h5">В период с {{ period.date_from }} по {% if period.to == 'null' %}сегодняшний день{% else %}{{ period.to }}{% endif %}</h3>
                        <ul class="list-style1 mb-0">
                            <li style="color: black;">Причина регистрации: <mark>{% if period.reason == None %}-{% else %}{{ period.reason }}{% endif %}</mark></li>
                            <li style="color: black;">Владелец: <mark>{% if period.owner == None %}-{% else %}{{ period.owner }}{% endif %}</mark></li>
                            <li style="color: black;">Период: <mark>{% if period.period == None %}-{% else %}{{ period.period }}{% endif %}</mark></li>
                            <p></p>
                        </ul>
                        {% endfor %}

                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="400ms" style="visibility: visible; animation-delay: 400ms; animation-name: fadeIn;">
                        {% if not expired and not active %}
                        <div class="bd-callout-warning">
                            <h3 class="mb-3 h4">Данные о диагностических картах, пробеге отсутствуют</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Проверка диагностических карт, пробег</h3>
                            {% if not active %}
                            <h3 class="mb-3 h5">Активных ДК не обнаружено</h3>
                            {% else %}
                            <h3 class="mb-3 h5">Активная ДК</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Дата выдачи ДК: <mark>{{ active.from_date }}</mark></li>
                                <li style="color: black;">Дата окончания ДК: <mark>{{ active.expire_date }}</mark></li>
                                <li style="color: black;">Показания одометра: <mark>{{ active.value }}</mark></li>
                                <li style="color: black;">Номер ДК: <mark>{{ active.dc_number }}</mark></li>
                                <li style="color: black;">Адрес выдачи ДК: <mark>{{ active.point_address }}</mark></li>
                            <p></p>
                        </ul>
                            {% endif %}
                        {% if not expired %}
                            <h3 class="mb-3 h5">Старых ДК не обнаружено</h3>
                            {% else %}
                            <h3 class="mb-3 h5">Старые ДК</h3>
                            {% for e in expired %}
                            <h3 class="mb-3 h6">Номер {{ e.dc_number }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Дата выдачи ДК: <mark>{{ e.from_date }}</mark></li>
                                <li style="color: black;">Дата окончания ДК: <mark>{{ e.expire_date }}</mark></li>
                                <li style="color: black;">Показания одометра: <mark>{{ e.value }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="400ms" style="visibility: visible; animation-delay: 400ms; animation-name: fadeIn;">
                        {% if not dtp %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">ДТП не обнаружено</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружены ДТП</h3>
                        {% for d in dtp %}
                            <h3 class="mb-3 h5">{{ d.date }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Повреждения: <mark>{% if d.damage == None %}-{% else %}{{ d.damage }}{% endif %}</mark></li>
                                <li style="color: black;">Тип ДТП: <mark>{% if d.type == None %}-{% else %}{{ d.type }}{% endif %}</mark></li>
                                <li style="color: black;">Описание инцидента: <mark>{% if d.damage_description == None %}-{% else %}{{ d.damage_description }}{% endif %}</mark></li>
                                <li style="color: black;">Место ДТП: <mark>{% if d.place == None %}-{% else %}{{ d.place }}{% endif %}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="mb-1-6 mb-lg-1-9 mb-xl-2-5 wow fadeIn" data-wow-delay="500ms" style="visibility: hidden; animation-delay: 500ms; animation-name: none;">
                         {% if not restrict %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Ограничений на ТС не обнаружено</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружены огранечения</h3>
                        {% for r in restrict %}
                            <h3 class="mb-3 h5">{{ r.restrict }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Основание ограничения: <mark>{{ r.basis_restrict }}</mark></li>
                                <li style="color: black;">Регион: <mark>{{ r.region }}</mark></li>
                                <li style="color: black;">Дата наложения ограничения: <mark>{{ r.date_from }}</mark></li>
                                <li style="color: black;">Дата окончания ограничения: <mark>{{ r.date_to }}</mark></li>
                                <li style="color: black;">Кем наложено ограничение: <mark>{{ r.who_imposed }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="wow fadeIn" data-wow-delay="600ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not wanted %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Информация о розыске ТС не обнаружена</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружена информация о розыске</h3>
                        {% for w in wanted %}
                            <h3 class="mb-3 h5">{{ w.region }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Марка (модель) ТС: <mark>{{ w.model }}</mark></li>
                                <li style="color: black;">Регион инициатора розыска: <mark>{{ w.region }}</mark></li>
                                <li style="color: black;">Дата постоянного учета в розыске: <mark>{{ w.date }}</mark></li>
                                <li style="color: black;">VIN ТС: <mark>{{ w.vin }}</mark></li>
                                <li style="color: black;">Год ТС: <mark>{{ w.year }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="wow fadeIn" data-wow-delay="700ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not pledges %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Информация о залогах ТС не обнаружена</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружена информация о залогах</h3>
                        {% for p in pledges %}
                            <h3 class="mb-3 h5">Дата записи {{ p.record_date }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Залогодатель: <mark>{{ p.pledge_give }} {{ p.pledge_give_birthday }}</mark></li>
                                <li style="color: black;">Залогодержатель: <mark>{{ w.pledge_get }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="wow fadeIn" data-wow-delay="800ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not reviews %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Информация об отзывных кампаниях не обнаружена</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружена информация об отзывных кампаниях</h3>
                        {% for r in reviews %}
                            <h3 class="mb-3 h5">Дата отзыва {{ r.date }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Организатор: <mark>{{ r.organization }}</mark></li>
                                <li style="color: black;">Причина отзыва: <mark>{{ r.reason }}</mark></li>
                                <li style="color: black;">Рекоммендации: <mark>{{ r.recommendation }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="wow fadeIn" data-wow-delay="900ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not taxi %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Информация в базе такси не найдена</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-danger">
                            <h3 class="mb-3 h4">Обнаружена информация в базе такси</h3>
                        {% for t in taxi %}
                            <h3 class="mb-3 h5">Номер разрешения {{ t.number }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Перевозчик, владелец лицензии: <mark>{{ t.organization }}</mark></li>
                                <li style="color: black;">Дата выдачи разрешения: <mark>{{ t.date_from }}</mark></li>
                                <li style="color: black;">Дата окончания разрешения: <mark>{{ t.date_to }}</mark></li>
                                <li style="color: black;">Статус разрешения: <mark>{{ t.status }}</mark></li>
                                <li style="color: black;">Региональная принадлежность: <mark>{{ t.region }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="wow fadeIn" data-wow-delay="1000ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not customs %}
                        <div class="bd-callout-warning">
                            <h3 class="mb-3 h4">Информация о таможенном оформлении не найдена</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">Обнаружена информация о таможенном оформлении</h3>
                        {% for c in customs %}
                            <h3 class="mb-3 h5">Модель {{ c.model }}</h3>
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Дата выпуска в свободное обращение: <mark>{{ c.date }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                     <div class="wow fadeIn" data-wow-delay="1100ms" style="visibility: hidden; animation-delay: 600ms; animation-name: none;">
                        {% if not rnis %}
                        <div class="bd-callout-warning">
                            <h3 class="mb-3 h4">Информация о регистрации ТС в РНИС не найдена (важно для грузовиков)</h3>
                        </div>
                        {% else %}
                        <div class="bd-callout-success">
                            <h3 class="mb-3 h4">ТС зарегестрировано в РНИС (важно для грузовиков)</h3>
                        {% for r in rnis %}
                            <ul class="list-style1 mb-0">
                                <li style="color: black;">Дата/время передачи последней телематики: <mark>{{ r.last_mark }}</mark></li>
                            <p></p>
                        </ul>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% if img %}
            {% for i in img %}
            <img src="{{ i.img }}">
            {% endfor %}
            {% endif %}
        </div>
    </div>
</section>

<section>
</section>

{% endblock body %}

{% block contacts %}
{% endblock contacts %}

{% block extrascripts %}
    <script>
        const requestURL =
        {% if request.is_secure %}"https://"{% else %}"http://"{% endif %}
        + "{{ request.META.HTTP_HOST }}"
        + "{{ request.get_full_path }}"
    </script>
    <script src="{% static 'scripts/loginAJAX.js' %}"></script>
{% endblock extrascripts %}